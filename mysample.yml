---
- hosts : all
  become : yes
  gather_facts : yes
  tasks:
    - name: I want to Install Apache
      dnf:
        name: httpd
        state: present 
      when : ansible_os_family == "RedHat"
        
    - name :  I want to start apache2 on amazon linux
      service :
            name : httpd
            state : started
      when : ansible_os_family == "RedHat"
      
    - name : I want to install apche2 on Debian node
      package :
          name: apache2
          state: present
      when : ansible_os_family == "Debian"
      vars :
      use_backend: yum  # or use_backend: dnf

    - name: Ensure Apache2 service is enabled and running
      service:
        name: apache2
        state: started
        enabled: yes
      
            

